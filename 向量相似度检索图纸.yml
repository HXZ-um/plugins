app:
  description: ä½¿ç”¨NEO4Jåç«¯æœåŠ¡ï¼Œå¯é€‰æ£€ç´¢ç±»å‹ä¸º"mixed"(æ··åˆ)ã€"chunks"(ä»…æ–‡æœ¬å—)ã€"nodes"(ä»…èŠ‚ç‚¹)
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: å‘é‡ç›¸ä¼¼åº¦æ£€ç´¢å›¾çº¸
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/siliconflow:0.0.35@534195ccf92d4a973ea685db37c19c795a93a2b68f2b87ee66fa59172b745dd6
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables:
  - description: ''
    id: 9d722416-b297-4e1c-a3e4-98d529129325
    name: properties_weight
    selector:
    - env
    - properties_weight
    value: '0.3'
    value_type: string
  - description: ''
    id: d176937e-08bd-4e8e-954a-a717a5abf524
    name: chunk_weight
    selector:
    - env
    - chunk_weight
    value: '0.7'
    value_type: string
  - description: ''
    id: e42789eb-900a-45aa-bb08-44d5d446b4de
    name: TOPK
    selector:
    - env
    - TOPK
    value: '10'
    value_type: string
  - description: ''
    id: 7ef1e1ae-f0d9-48ce-9cb4-9d6792db7977
    name: SEMANTIC_QUERY
    selector:
    - env
    - SEMANTIC_QUERY
    value: semantic_query
    value_type: string
  - description: ''
    id: 6b039f77-f0b1-4e1e-b91d-825eafd1da22
    name: NEO4J_WEB_HOST
    selector:
    - env
    - NEO4J_WEB_HOST
    value: http://host.docker.internal:8001
    value_type: string
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1755698048465-source-1755698752391-target
      selected: false
      source: '1755698048465'
      sourceHandle: source
      target: '1755698752391'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: end
      id: 1755698752391-true-1755698760748-target
      selected: false
      source: '1755698752391'
      sourceHandle: 'true'
      target: '1755698760748'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1755698752391-false-1757239854914-target
      selected: false
      source: '1755698752391'
      sourceHandle: 'false'
      target: '1757239854914'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: end
      id: 1757239854914-source-1755329464897-target
      selected: false
      source: '1757239854914'
      sourceHandle: source
      target: '1755329464897'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: http-request
      id: 1755329430498-source-1763474912953-target
      selected: false
      source: '1755329430498'
      sourceHandle: source
      target: '1763474912953'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: if-else
      id: 1763474912953-source-1763475189585-target
      source: '1763474912953'
      sourceHandle: source
      target: '1763475189585'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1763475189585-true-1755698048465-target
      source: '1763475189585'
      sourceHandle: 'true'
      target: '1755698048465'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: end
      id: 1763475189585-false-1763475199572-target
      source: '1763475189585'
      sourceHandle: 'false'
      target: '1763475199572'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: query
          max_length: 256
          options: []
          required: true
          type: text-input
          variable: query
        - label: æ£€ç´¢æ–¹å¼ï¼ˆå¯é€‰å€¼ä¸º"mixed"(æ··åˆ)ã€"chunks"(ä»…æ–‡æœ¬å—)ã€"nodes"(ä»…èŠ‚ç‚¹)ï¼Œé»˜è®¤mixedï¼‰
          max_length: 48
          options:
          - mixed
          - chunks
          - nodes
          required: false
          type: select
          variable: search_type
      height: 115
      id: '1755329430498'
      position:
        x: -111.96586986850184
        y: 2.267407075511869
      positionAbsolute:
        x: -111.96586986850184
        y: 2.267407075511869
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1757239854914'
          - text
          variable: text
        selected: false
        title: ç»“æŸ
        type: end
      height: 89
      id: '1755329464897'
      position:
        x: 1116.9035269722497
        y: 358.00289616352876
      positionAbsolute:
        x: 1116.9035269722497
        y: 358.00289616352876
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(body: str) -> dict:\n    data = json.loads(body)\n\
          \  \n    try:\n        status = data.get(\"status\", \"error\")\n      \
          \  if status == 'success':\n            formatted_results = data.get(\"\
          results\", [])\n\n            results_json_str = json.dumps(\n         \
          \       formatted_results,\n                ensure_ascii=False,\n      \
          \          default=str \n            )\n\n            return {\n       \
          \         \"status\": \"success\",\n                \"message\": \"\", \n\
          \                \"results\": results_json_str  \n            }\n      \
          \  else:\n            return {\n                \"status\": \"error\",\n\
          \                \"message\": data.get(\"message\", \"è·å–å¤±è´¥\"),\n       \
          \         \"results\": \"\" \n            }\n\n    except Exception as e:\n\
          \        # æ•è·å¼‚å¸¸ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯\n        return {\n            \"status\": \"error\"\
          ,\n            \"message\": f\"å¤„ç†æ’ä»¶ç»“æœå¤±è´¥ï¼š{str(e)}\",\n            \"results\"\
          : \"[]\"  # é”™è¯¯æ—¶è¿”å›ç©ºJSONå­—ç¬¦ä¸²\n        }"
        code_language: python3
        desc: ''
        outputs:
          message:
            children: null
            type: string
          results:
            children: null
            type: string
          status:
            children: null
            type: string
        selected: false
        title: è·å–æŸ¥è¯¢ç»“æœ
        type: code
        variables:
        - value_selector:
          - '1763474912953'
          - body
          variable: body
      height: 53
      id: '1755698048465'
      position:
        x: 487.819464338477
        y: 115.96591938503141
      positionAbsolute:
        x: 487.819464338477
        y: 115.96591938503141
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: 13b8bfc1-2cbf-47bd-b742-6a717f835ea0
            value: error
            varType: string
            variable_selector:
            - '1755698048465'
            - status
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: æ¡ä»¶åˆ†æ”¯
        type: if-else
      height: 125
      id: '1755698752391'
      position:
        x: 834.7929008449668
        y: 127.07153446812458
      positionAbsolute:
        x: 834.7929008449668
        y: 127.07153446812458
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1755698048465'
          - message
          variable: text
        selected: true
        title: ç»“æŸ 2
        type: end
      height: 89
      id: '1755698760748'
      position:
        x: 1108.2232093144742
        y: 99.5677485779729
      positionAbsolute:
        x: 1108.2232093144742
        y: 99.5677485779729
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            enable_thinking: false
          mode: chat
          name: Qwen/Qwen3-32B
          provider: langgenius/siliconflow/siliconflow
        prompt_template:
        - id: 0f35703c-8467-47ee-8ff5-92de9d198204
          role: system
          text: "è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹è¦æ±‚å®Œæˆä»»åŠ¡ï¼Œä»…è¾“å‡ºæœ€ç»ˆç»“æœï¼Œä¸å¾—åŒ…å«ä»»ä½•é¢å¤–å†…å®¹ï¼š\n\n## ä¸€ã€ä»»åŠ¡ç›®æ ‡\nåŸºäºæä¾›çš„ç”¨æˆ·é—®é¢˜å’ŒNeo4jæ£€ç´¢ç»“æœï¼Œå¯¹ç»“æœä¸­çš„å¯¹è±¡æŒ‰â€œä¸ç”¨æˆ·é—®é¢˜çš„è¯­ä¹‰åŒ¹é…åº¦â€ä»é«˜åˆ°ä½é‡æ–°æ’åºï¼Œæœ€ç»ˆè¿”å›åŒ…å«å…¨éƒ¨åŸå§‹å¯¹è±¡çš„JSONæ•°ç»„ã€‚æ ¸å¿ƒåŸåˆ™ï¼šå¯¹è±¡å…·ä½“å­—æ®µä¸ç”¨æˆ·éœ€æ±‚çš„åŒ¹é…åº¦è¶Šé«˜ï¼Œæ’åºä¼˜å…ˆçº§è¶Šé«˜ã€‚\n\
            \n## äºŒã€è¾“å…¥æ•°æ®\n1. **ç”¨æˆ·é—®é¢˜**ï¼š{{#1755329430498.query#}}\n2. **Neo4jæ£€ç´¢ç»“æœ**ï¼š{{#1755698048465.results#}}ï¼ˆæ ¼å¼ä¸ºå¯¹è±¡åˆ—è¡¨JSONå­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå¯¹è±¡åŒ…å«`uid`ï¼ˆéœ€ä¿ç•™åŸå§‹å€¼ï¼‰ã€`text`ã€`similarity`ã€`properties`ã€`label`ç­‰å­—æ®µï¼‰\n\
            \n## ä¸‰ã€æ ¸å¿ƒæ’åºä¼˜å…ˆçº§ï¼ˆä¸¥æ ¼éµå¾ªï¼‰\n1. **ç¬¬ä¸€ä¼˜å…ˆçº§**ï¼š`text`å­—æ®µä¸ç”¨æˆ·é—®é¢˜çš„è¯­ä¹‰ç›¸å…³æ€§\n   - ä¼˜å…ˆæ’åº`text`ä¸­åŒ…å«ç”¨æˆ·é—®é¢˜æ ¸å¿ƒå…³é”®è¯çš„ç»“æœ\n\
            \   - å†æ’åº`text`è¡¨è¿°ä¸ç”¨æˆ·éœ€æ±‚åŒ¹é…åº¦æ›´é«˜çš„ç»“æœï¼ˆå¦‚ç”¨æˆ·é—®é¢˜è¯¢é—®â€œæµç¨‹â€ï¼Œ`text`æ˜ç¡®æåŠâ€œæ“ä½œæµç¨‹â€çš„ç»“æœä¼˜å…ˆäºä»…æåŠâ€œç›¸å…³æ­¥éª¤â€çš„ç»“æœï¼‰\n\
            2. **ç¬¬äºŒä¼˜å…ˆçº§**ï¼š`properties`å­—æ®µä¸ç”¨æˆ·é—®é¢˜çš„åŒ¹é…åº¦\n   - è‹¥`text`è¯­ä¹‰ç›¸å…³æ€§ç›¸è¿‘ï¼Œä¼˜å…ˆæ’åº`properties`ä¸­åŒ…å«ç”¨æˆ·é—®é¢˜å…³é”®ä¿¡æ¯ï¼ˆå¦‚å›¾çº¸åã€ç¼–å·ã€ç±»åˆ«ç­‰ï¼‰çš„ç»“æœ\n\
            3. **ç¬¬ä¸‰ä¼˜å…ˆçº§**ï¼š`similarity`å­—æ®µï¼ˆä»…ä½œè¾…åŠ©ï¼‰\n   - ä»…å½“`text`å’Œ`properties`åŒ¹é…åº¦å‡ä¸€è‡´æ—¶ï¼Œå‚è€ƒ`similarity`å€¼ï¼ˆå€¼è¶Šé«˜æ’åºè¶Šé å‰ï¼‰\n\
            \   - è‹¥è¯­ä¹‰åˆ†æåˆ¤å®šæŸç»“æœï¼ˆå¦‚`similarity=0.6`ï¼‰æ¯”å¦ä¸€ç»“æœï¼ˆå¦‚`similarity=0.7`ï¼‰æ›´ç¬¦åˆç”¨æˆ·é—®é¢˜ï¼Œéœ€ä¼˜å…ˆæ’åˆ—è¯­ä¹‰åŒ¹é…åº¦é«˜çš„ç»“æœï¼Œå¿½ç•¥`similarity`æ•°å€¼å¤§å°\n\
            \n## å››ã€è¾“å‡ºå¼ºåˆ¶è§„åˆ™\n1. ä»…è¿”å›æ’åºåçš„JSONæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å¯¹è±¡æ˜¯Neo4jæ£€ç´¢ç»“æœä¸­çš„å¯¹è±¡\n2. ç¦æ­¢è¾“å‡ºä»»ä½•æ–‡å­—è§£é‡Šã€å¤‡æ³¨ã€å­—æ®µè¯´æ˜ã€æ ¼å¼è¯´æ˜ç­‰ï¼Œä»…å…è®¸JSONæ•°ç»„è¿™ä¸€ç§è¾“å‡ºå½¢å¼\n\
            \nè¾“å‡ºç¤ºä¾‹ï¼š\n   ```json\n\"drawings\": [\n     {\n       \"uid\": \"5b87bfd0963f02b52feba64f7b89d33b8430a92cb85d240bdc46844acf722540\"\
            ,\n       \"label\": \"Project\",\n       \"text\": \"åŸå¸‚ç»¼åˆä½“é¡¹ç›®è§„åˆ’æ–‡æ¡£\",\n\
            \       \"similarity\": 0.8722467422485352,\n       \"source\": \"node\"\
            ,\n       \"properties\": {\n         \"name\": \"åŸå¸‚ç»¼åˆä½“\",\n         \"\
            project_id\": \"10032251\",\n         \"uid\": \"5b87bfd0963f02b52feba64f7b89d33b8430a92cb85d240bdc46844acf722540\"\
            ,\n         \"updated_at\": \"2025-10-27T19:15:21.973304\"\n       }\n\
            \     }\n   ]\n   ```\n"
        - id: 912ac159-b979-4c0c-b94e-faa9bcfff844
          role: user
          text: '{{#1755329430498.query#}}'
        selected: false
        structured_output:
          schema:
            additionalProperties: false
            properties:
              drawings:
                items:
                  additionalProperties: false
                  properties:
                    data:
                      additionalProperties: false
                      description: drawingsåˆ—è¡¨é‡Œçš„å¯¹è±¡
                      properties:
                        label:
                          type: string
                        properties:
                          additionalProperties: false
                          properties:
                            name:
                              type: string
                            project_id:
                              type: string
                          required: []
                          type: object
                        similarity:
                          type: string
                        source:
                          type: string
                        text:
                          type: string
                        uid:
                          type: string
                      required: []
                      type: object
                  required: []
                  type: object
                type: array
            required: []
            type: object
        structured_output_enabled: true
        title: LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 89
      id: '1757239854914'
      position:
        x: 1116.9035269722497
        y: 267.95315895387563
      positionAbsolute:
        x: 1116.9035269722497
        y: 267.95315895387563
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-401
            key: ''
            type: text
            value: "{\n  \"query_text\": \"{{#1755329430498.query#}}\",\n  \"search_type\"\
              : \"{{#1755329430498.search_type#}}\",\n  \"top_k\": {{#env.TOPK#}},\n\
              \  \"chunk_weight\": {{#env.chunk_weight#}},\n  \"properties_weight\"\
              : {{#env.properties_weight#}}\n}"
          type: json
        desc: ''
        headers: ''
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: Neo4j åŒç´¢å¼•è¯­ä¹‰æŸ¥è¯¢
        type: http-request
        url: '{{#env.NEO4J_WEB_HOST#}}/{{#env.SEMANTIC_QUERY#}}'
        variables: []
      height: 126
      id: '1763474912953'
      position:
        x: -111.96586986850184
        y: 121.17052978384874
      positionAbsolute:
        x: -111.96586986850184
        y: 121.17052978384874
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: '='
            id: 20de1713-f52f-4313-962f-49bae8b814ca
            value: '200'
            varType: number
            variable_selector:
            - '1763474912953'
            - status_code
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: åˆ¤æ–­æ£€ç´¢æ˜¯å¦æˆåŠŸ
        type: if-else
      height: 125
      id: '1763475189585'
      position:
        x: 172.011842710564
        y: 149.53697576403556
      positionAbsolute:
        x: 172.011842710564
        y: 149.53697576403556
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1763474912953'
          - body
          variable: text
        selected: false
        title: å¤±è´¥ç»“æŸ
        type: end
      height: 89
      id: '1763475199572'
      position:
        x: 487.819464338477
        y: 289.288345930407
      positionAbsolute:
        x: 487.819464338477
        y: 289.288345930407
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -533.6350338289656
      y: 241.43381541627673
      zoom: 0.7853656273560699
